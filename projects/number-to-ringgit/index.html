<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Number To Ringgit</title>
<link rel="stylesheet" type="text/css" href="style.css">
</head>

<body>
    <h1>Number To Ringgit</h1>
    <form>
      <h2><label for="numberInput">Insert Number:</label></h2>
      <input type="number" id="numberInput" step=".01" oninput="convertToWords()">
    </form>

<br><br>

<table id="resultsTable">

  <tr>
    <th>Ringgit</th>
    <td id="RinggitWordsOnly" class="highlight-on-hover" onclick="copyToClipboard('RinggitWordsOnly')">-</td>
  </tr>

  <tr>
    <th>Number</th>
    <td id="numberWithSeparator" class="highlight-on-hover" onclick="copyToClipboard('numberWithSeparator')">-</td>
  </tr>
  <tr>
    <th>Words</th>
    <td id="wordsOnly" class="highlight-on-hover" onclick="copyToClipboard('wordsOnly')">-</td>
  </tr>

</table>

    <div class="copy-indicator" id="copyIndicator">Copied!</div>


    <br><hr>

   <div class="notes-section">
        <h2>Notes</h2>
        <ul>

            <li>
                <p>You can click on the generated text to copy it to your clipboard.</p>
            </li>

            <li>
                <p>
                    The "decimal points" numbers/words is a bit quirky:
                    <ul>
                        <li>decimal point "words" will only work well up to 2 decimals, after that it will just state the number.</li>
                        
                        <li>decimal point "number" will only show up to 2 decimal points, and ignore any additional demical points that you key in.</li>


                        <li>Best NOT to insert any decimal points if your number has "zero" decimals, as it may show up as "and Sen Zero".</li>

                    </ul>
            </li>

            <li><p>Should work ok for normal money type numbers</p></li>

        </ul>

    </div>



  <div class="footer-links">
      <hr>
      <a href="https://chantero.com/projects">🍪</a>
      <a href="https://chantero.com">🧁</a>
    </div>





<script>
var th = ['', 'thousand', 'million', 'billion', 'trillion'];
var dg = ['zero', 'one', 'two', 'three', 'four', 'five', 'six', 'seven', 'eight', 'nine'];
var tn = ['ten', 'eleven', 'twelve', 'thirteen', 'fourteen', 'fifteen', 'sixteen', 'seventeen', 'eighteen', 'nineteen'];
var tw = ['twenty ', 'thirty ', 'forty ', 'fifty ', 'sixty ', 'seventy ', 'eighty ', 'ninety '];

function toWords(s) {
    s = s.toString();
    s = s.replace(/[\, ]/g, '');
    if (s != parseFloat(s)) return '[ NOT A NUMBER ]';
    var x = s.indexOf('.');
    if (x == -1) x = s.length;
    if (x > 15) return '[ TOO BIG ]';
    var n = s.split('');
    var str = '';
    var sk = 0;
    for (var i = 0; i < x; i++) {
        if ((x - i) % 3 == 2) {
            if (n[i] == '1') {
                str += tn[Number(n[i + 1])] + ' ';
                i++;
                sk = 1;
            } else if (n[i] != 0) {
                str += tw[n[i] - 2] + ' ';
                sk = 1;
            }
        } else if (n[i] != 0) {
            str += dg[n[i]] + ' ';
            if ((x - i) % 3 == 0) str += 'hundred ';
            sk = 1;
        }
        if ((x - i) % 3 == 1) {
            if (sk) str += th[(x - i - 1) / 3] + ' ';
            sk = 0;
        }
    }

    // decimal
    if (x != s.length) {
        var y = s.length;
        str += 'and Sen ';

    // works for 2 digit only
    for (var i = x + 1; i < y; i++) {
            if (i === x + 1) {
                if (n[i] === '1') {
                    str += tn[Number(n[i + 1])] + ' ';
                    i++;
                } else if (n[i] !== '0') {
                    str += tw[n[i] - 2] + ' ';
                }
            } else {
                str += dg[n[i]] + ' ';
            }
        }
    }


    final = str.replace(/\s+/g, ' ').replace(/- /g, '-');
    if (final.substring(final.length-1) == "-"){
        final = final.substring(0, final.length-1);
    }
    return final.trim().toLowerCase().split(' ').map(function(word) {
        if (word === 'and') {
            return word.toLowerCase(); // Convert "and" to lowercase
        } else if (word.includes('-')) {
            return word.split('-').map(function(subword) {
                return subword.charAt(0).toUpperCase() + subword.slice(1).toLowerCase();
            }).join('-');
        } else {
            return word.charAt(0).toUpperCase() + word.slice(1).toLowerCase();
        }
    }).join(' ');

}

function convertToWords() {
    var numberInput = document.getElementById("numberInput").value;
    var numberWithSeparator = "RM" + numberWithCommas(numberInput);
    var wordsOnly = "Ringgit Malaysia " + toWords(numberInput);
    var RinggitWordsOnly = wordsOnly + " (" + numberWithSeparator + ") Only";
    
    document.getElementById("numberWithSeparator").innerText = numberWithSeparator;
    document.getElementById("wordsOnly").innerText = wordsOnly;
    document.getElementById("RinggitWordsOnly").innerText = RinggitWordsOnly;
}


function numberWithCommas(x) {
    var roundedNumber = parseFloat(x).toFixed(2); // Round to two decimal places
    return roundedNumber.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ","); // Add commas
}


function copyToClipboard(elementId) {
    var copyText = document.getElementById(elementId);
    var textArea = document.createElement("textarea");
    textArea.value = copyText.innerText;
    document.body.appendChild(textArea);
    textArea.select();
    document.execCommand("copy");
    document.body.removeChild(textArea);

    var copyIndicator = document.getElementById("copyIndicator");
    copyIndicator.style.top = copyText.offsetTop + "px";
    copyIndicator.style.left = copyText.offsetLeft + "px";
    copyIndicator.classList.add("show");

    copyText.style.backgroundColor = "pink";
    setTimeout(function() {
        copyIndicator.classList.remove("show");
        copyText.style.backgroundColor = "";
    }, 450);



}

</script>

</body>
</html>

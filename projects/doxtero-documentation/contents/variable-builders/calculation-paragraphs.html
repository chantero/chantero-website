<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<title>Calculation Paragraphs</title>
<link rel="stylesheet" href="../../assets/styles/style.css">
</head>
<body>
<div class="container">




<h1>Calculation Paragraphs</h1>


<div class="note-blue">
    Calculation paragraphs can be used to calculate based on numbers, and numbers in variables
</div>


<div class="column-container">

  <div class="input-container">

    <div>
      <h2>Insert Calculation Expression</h2>

      <div class="note-yellow">Example:<br>
            <code>{{age}} + 10</code>
            <code>10 + 10</code>
      </div>

      <textarea id="calculation" placeholder=""></textarea>

    </div>

    <br>


    <div>
      <h2>Insert Method (optional)</h2>
        <div>
            <code class="copy-style" onclick="clearMethod()">* clear *</code>
            <code class="copy-style" onclick="copyToClipboard(this); setMethod(this)">num</code>
            <code class="copy-style" onclick="copyToClipboard(this); setMethod(this)">num words</code>
            <code class="copy-style" onclick="copyToClipboard(this); setMethod(this)">num describe</code>
            <code class="copy-style" onclick="copyToClipboard(this); setMethod(this)">ringgit</code>
            <code class="copy-style" onclick="copyToClipboard(this); setMethod(this)">ringgit words</code>
            <code class="copy-style" onclick="copyToClipboard(this); setMethod(this)">ringgit describe</code>
        </div><br>

      <input type="text" id="method" placeholder=""/>
    </div>
  </div>

  <div class="output-container">
    <h2>Calculation Paragraph Variables</h2>
      <div class="note-yellow">There are 2 calculation paragraph styles. Example:<br>
        <code>^^ 10 + 10 | ringgit^^</code><br>
        <code>[[^ {{age}} + 10 | num words]]</code>

      </div>

    <div>
      <h3>ðŸ”´ Type 1 <code>^^ calculation ^^</code></h3>
      <div id="output1" class="output-box" contenteditable="true" onclick="copyToClipboard(this)"></div>
    </div>

    <div>
      <h3>ðŸŸ¢ Type 2 <code>[[^ calculation ]]</code></h3>
      <div id="output2" class="output-box" contenteditable="true" onclick="copyToClipboard(this)"></div>
    </div>

  </div>
</div>

<br><br><br><br>

<script>
function updateOutput() {
    let calc = document.getElementById('calculation').value;
    let method = document.getElementById('method').value.trim();

    if (!calc.trim()) {
      // No calculation, clear outputs
      document.getElementById('output1').innerText = '';
      document.getElementById('output2').innerText = '';
      return;
    }

    // Preserve line breaks as <br> if any (optional, but consistent)
    // Usually calc expressions won't have line breaks, but just in case:
    let calcText = calc.replace(/\n/g, '<br>');

    // Type 1
    let output1 = method
      ? `^^${calcText} | ${method}^^`
      : `^^${calcText}^^`;

    // Type 2
    let output2 = method
     ? `[[^ ${calcText} | ${method}]]`
     : `[[^${calcText}]]`;


    document.getElementById('output1').innerHTML = output1;
    document.getElementById('output2').innerHTML = output2;
}

function copyToClipboard(el) {
    // Copy raw text without html tags (in case <br> are present)
    let textToCopy = el.innerText || el.textContent;
    navigator.clipboard.writeText(textToCopy).then(() => {
        el.classList.add('copied');
        setTimeout(() => el.classList.remove('copied'), 250);
    });
}




function setMethod(el) {
    // Copy to clipboard
    copyToClipboard(el);

    // Populate the method input with clicked value
    document.getElementById('method').value = el.innerText.trim();

    // Trigger update to refresh the outputs
    updateOutput();
}


function clearMethod() {
    document.getElementById('method').value = '';
    updateOutput();
}




document.getElementById('calculation').addEventListener('input', updateOutput);
document.getElementById('method').addEventListener('input', updateOutput);

updateOutput();


</script>



</div>
</body>
</html>

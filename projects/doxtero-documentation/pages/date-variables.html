<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<title>Date Variables</title>
<link rel="stylesheet" href="../styles/main.css">
</head>

<body>
<div class="container">


<h1>Date Variables</h1>


  <div class="mode-buttons">
    <button id="button_date_vars" class="selected" type="button" aria-pressed="true">Date Variables</button>
    <button id="button_smart_date_vars" type="button" aria-pressed="false">Smart Date Variables</button>
  </div>

  <div id="form_date_vars">
    <div class="form-group">
      <h2 for="date_variable_input">Insert Variable Name</h2>
      <input type="text" id="date_variable_input" placeholder="" autocomplete="off" />
    </div>
  </div>

  <div id="form_smart_date_vars" style="display:none;">

      <h2 for="smart_date_variable_input">Insert Date (Optional)</h2>

      <input
        type="numbers"
        id="smart_date_variable_input"
        autocomplete="off"
      />


      <div class="note-yellow">Insert date in numbers - format:<br>
        <code>YYYYMMDD</code>
        <code>YYYYMMDDhh</code>
        <code>YYYYMMDDhhmm</code>
        <code>YYYYMMDDhhmmss</code><br>
        Example: <code>20230621</code>

      </div>
      

  </div>

  <div class="output-grid" id="output_grid_container">
    <!-- Outputs appear here -->
  </div>

</div>


<br><br><br><br><br>

<script>
const button_date_vars = document.getElementById('button_date_vars');
const button_smart_date_vars = document.getElementById('button_smart_date_vars');

const form_date_vars = document.getElementById('form_date_vars');
const form_smart_date_vars = document.getElementById('form_smart_date_vars');

const date_variable_input = document.getElementById('date_variable_input');
const smart_date_variable_input = document.getElementById('smart_date_variable_input');

const output_grid_container = document.getElementById('output_grid_container');

let current_mode = 'dateVars'; // or 'smartDateVars'

// Date variable methods:
const date_methods = [
  "date",
  "date time",
  "date day",
  "date number",
  "date iso",
  "date ordinal longform",
  "date ordinal shortform",
  "dob",
  "dob years",
  "dob years months",
  "dob years months days",
  "dob full"
];

function createOutputItem(label, text) {
  const container = document.createElement('div');
  container.className = 'output-box';

  const labelEl = document.createElement('div');
  labelEl.className = 'output-label';
  labelEl.textContent = label;

  const textEl = document.createElement('pre');
  textEl.textContent = text;

  container.appendChild(labelEl);
  container.appendChild(textEl);

  container.addEventListener('click', () => {
    navigator.clipboard.writeText(text).then(() => {
      container.classList.add('copied');
      setTimeout(() => container.classList.remove('copied'), 400);
    });
  });

  return container;
}

function generateDateVarsOutputs(variable) {
  output_grid_container.innerHTML = '';
  if (!variable) {
    output_grid_container.textContent = 'Please enter a variable name.';
    return;
  }
  date_methods.forEach(method => {
    const label = method;
    const text = `{{${variable} | ${method}}}`;
    output_grid_container.appendChild(createOutputItem(label, text));
  });
}

function generateSmartDateVarsOutputs(dateValue) {
  output_grid_container.innerHTML = '';
  // No variable name input here
  date_methods.forEach(method => {
    const label = method;
    let text = `<<${method}>>`;
    if (dateValue && dateValue.trim()) {
      text = `<<${method} | ${dateValue.trim()}>>`;
    }
    output_grid_container.appendChild(createOutputItem(label, text));
  });
}

button_date_vars.addEventListener('click', () => {
  if (current_mode === 'dateVars') return;
  current_mode = 'dateVars';
  button_date_vars.classList.add('selected');
  button_date_vars.setAttribute('aria-pressed', 'true');
  button_smart_date_vars.classList.remove('selected');
  button_smart_date_vars.setAttribute('aria-pressed', 'false');

  form_date_vars.style.display = '';
  form_smart_date_vars.style.display = 'none';
  output_grid_container.innerHTML = '';
  date_variable_input.value = '';
});


button_smart_date_vars.addEventListener('click', () => {
  if (current_mode === 'smartDateVars') return;
  current_mode = 'smartDateVars';
  button_smart_date_vars.classList.add('selected');
  button_smart_date_vars.setAttribute('aria-pressed', 'true');
  button_date_vars.classList.remove('selected');
  button_date_vars.setAttribute('aria-pressed', 'false');

  form_smart_date_vars.style.display = '';
  form_date_vars.style.display = 'none';
  smart_date_variable_input.value = '';
  
  // Generate outputs immediately even if input is empty
  generateSmartDateVarsOutputs('');
});





// Update outputs as user types:
date_variable_input.addEventListener('input', () => {
  if (current_mode !== 'dateVars') return;
  generateDateVarsOutputs(date_variable_input.value.trim());
});

smart_date_variable_input.addEventListener('input', () => {
  // Remove non-digit chars immediately:
  smart_date_variable_input.value = smart_date_variable_input.value.replace(/\D/g, '');
  if (current_mode !== 'smartDateVars') return;
  generateSmartDateVarsOutputs(smart_date_variable_input.value.trim());
});
</script>




</body>
</html>

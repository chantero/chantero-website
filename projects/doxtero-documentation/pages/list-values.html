<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<title>List Values</title>
<link rel="stylesheet" href="../styles/main.css">
</head>


<body>
<div class="container">


<h1>List Values</h1>

<div class="column-container">


  <div class="input-container">

    <h2>Insert List Items</h2>
    <div id="list_items">
      <!-- List items inserted here -->
    </div>

    <button id="add_line_button" type="button">Add Line</button>

    <button class="color-light-blue" id="to_uppercase" type="button">Upper</button>
    <button class="color-light-blue" id="to_lowercase" type="button">Lower</button>
    <button class="color-light-blue" id="to_titlecase" type="button">Title</button>
    <button class="color-red" id="clear_all" type="button">Clear</button>
  </div>

  <div class="output-container">
    <div>
      <h2>List Values</h2>

      <div class="note-yellow">
      Use this to format the "values" for "list variables"
      </div>

      <div id="output" class="output-box" contenteditable="true" onclick="copyToClipboard(this)"></div>
    </div>
  </div>

</div>

<script>
const list_items_div = document.getElementById('list_items');
const add_line_button = document.getElementById('add_line_button');
const output_div = document.getElementById('output');

let lines = ['', '', '']; // default 3 empty lines

function createLineElement(text, index) {
  const container = document.createElement('div');
  container.className = 'list-item';
  container.dataset.index = index;

  const textarea = document.createElement('textarea');
  textarea.className = 'list-textarea';
  textarea.value = text;
  textarea.rows = 3;
  textarea.addEventListener('input', () => {
    lines[index] = textarea.value;
    updateOutput();
  });

  const btns = document.createElement('div');
  btns.className = 'list-buttons';

  const button_up = document.createElement('button');
  button_up.type = 'button';
  button_up.textContent = '↑';
  button_up.title = 'Move Up';
  button_up.disabled = (index === 0);
  button_up.addEventListener('click', () => {
    if (index === 0) return;
    [lines[index - 1], lines[index]] = [lines[index], lines[index - 1]];
    renderLines();
  });

  const button_down = document.createElement('button');
  button_down.type = 'button';
  button_down.textContent = '↓';
  button_down.title = 'Move Down';
  button_down.disabled = (index === lines.length - 1);
  button_down.addEventListener('click', () => {
    if (index === lines.length - 1) return;
    [lines[index + 1], lines[index]] = [lines[index], lines[index + 1]];
    renderLines();
  });

  const button_delete = document.createElement('button');
  button_delete.type = 'button';
  button_delete.textContent = '✕';
  button_delete.title = 'Delete Line';
  button_delete.style.backgroundColor = '#d9534f';
  button_delete.addEventListener('click', () => {
    lines.splice(index, 1);
    renderLines();
  });

  btns.appendChild(button_up);
  btns.appendChild(button_down);
  btns.appendChild(button_delete);

  container.appendChild(textarea);
  container.appendChild(btns);

  return container;
}

function renderLines() {
  list_items_div.innerHTML = '';
  if (lines.length === 0) {
    list_items_div.textContent = '';
  } else {
    lines.forEach((line, idx) => {
      list_items_div.appendChild(createLineElement(line, idx));
    });
  }
  updateOutput();
}

function updateOutput() {
  // Filter out empty lines (trimmed)
  const filtered = lines.filter(line => line.trim() !== '');

  if (filtered.length === 0) {
    output_div.textContent = '';
    return;
  }

  // Replace newlines in each line with literal <br>
  const replaced = filtered.map(line => line.replace(/\n/g, '<br>'));

  // Join with ' | '
  output_div.textContent = replaced.join('|');
}

add_line_button.addEventListener('click', () => {
  lines.push('');
  renderLines();
});

renderLines();



function copyToClipboard(el) {
  const text = el.textContent || el.innerText;
  navigator.clipboard.writeText(text).then(() => {
    el.classList.add('copied');
    setTimeout(() => el.classList.remove('copied'), 250);
  });
}



function toTitleCase(str) {
  return str.replace(/\w\S*/g, txt =>
    txt.charAt(0).toUpperCase() + txt.substr(1).toLowerCase()
  );
}

document.getElementById('to_uppercase').addEventListener('click', () => {
  lines = lines.map(line => line.toUpperCase());
  renderLines();
});

document.getElementById('to_lowercase').addEventListener('click', () => {
  lines = lines.map(line => line.toLowerCase());
  renderLines();
});

document.getElementById('to_titlecase').addEventListener('click', () => {
  lines = lines.map(line => toTitleCase(line));
  renderLines();
});


document.getElementById('clear_all').addEventListener('click', () => {
  lines = lines.map(() => '');
  renderLines();
});





</script>

<br><br><br><br><br>
</div>
</body>
</html>

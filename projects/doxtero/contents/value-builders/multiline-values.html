<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<title>Multi-line Values with Indent</title>
<link rel="stylesheet" href="../../assets/styles/style.css">
</head>

<body>
<div class="container">

<h1>Multi-line Values</h1>

<div class="input-container">
<h2>Input Text</h2>

<!-- Symbol Buttons -->
<div class="symbol-buttons-layout">

<!-- Smart Articles-->
<button class="symbol-button" type="button" onclick="insertBullet('[[*A]]')">[[*A]]</button>
<button class="symbol-button" type="button" onclick="insertBullet('[[*a]]')">[[*a]]</button>

<!-- BULLETS & DOTS -->
<button class="symbol-button" type="button" onclick="insertBullet('• ')">•</button>
<button class="symbol-button" type="button" onclick="insertBullet('‣ ')">‣</button>
<button class="symbol-button" type="button" onclick="insertBullet('∘ ')">∘</button>
<button class="symbol-button" type="button" onclick="insertBullet('◦ ')">◦</button>
<button class="symbol-button" type="button" onclick="insertBullet('▪ ')">▪</button>
<button class="symbol-button" type="button" onclick="insertBullet('▫ ')">▫</button>
<button class="symbol-button" type="button" onclick="insertBullet('■ ')">■</button>

<!-- ARROWS -->
<button class="symbol-button" type="button" onclick="insertBullet('→ ')">→</button>
<button class="symbol-button" type="button" onclick="insertBullet('⇒ ')">⇒</button>
<button class="symbol-button" type="button" onclick="insertBullet('» ')">»</button>
<button class="symbol-button" type="button" onclick="insertBullet('↪ ')">↪</button>
<button class="symbol-button" type="button" onclick="insertBullet('↔ ')">↔</button>
<button class="symbol-button" type="button" onclick="insertBullet('⇨ ')">⇨</button>
<button class="symbol-button" type="button" onclick="insertBullet('⇥ ')">⇥</button>

<!-- CHECKBOXES & MARKS -->
<button class="symbol-button" type="button" onclick="insertBullet('☐ ')">☐</button>
<button class="symbol-button" type="button" onclick="insertBullet('☑ ')">☑</button>
<button class="symbol-button" type="button" onclick="insertBullet('☒ ')">☒</button>
<button class="symbol-button" type="button" onclick="insertBullet('✔ ')">✔</button>
<button class="symbol-button" type="button" onclick="insertBullet('✘ ')">✘</button>

<!-- STARS -->
<button class="symbol-button" type="button" onclick="insertBullet('★ ')">★</button>
<button class="symbol-button" type="button" onclick="insertBullet('☆ ')">☆</button>

<!-- TEXT EMOJIS / FACES -->
<!-- <button class="symbol-button" type="button" onclick="insertBullet(':) ')">:) </button>
<button class="symbol-button" type="button" onclick="insertBullet(':( ')">:( </button>
<button class="symbol-button" type="button" onclick="insertBullet(':D ')">:D </button>
<button class="symbol-button" type="button" onclick="insertBullet(';) ')">;) </button>
<button class="symbol-button" type="button" onclick="insertBullet(':P ')">:P </button>
<button class="symbol-button" type="button" onclick="insertBullet(':-| ')">:-| </button> -->

</div>

<!-- CUSTOM TEXT BLOCKS -->

<div class="method-buttons">
    <button type="button" onclick="clearSymbols()">* clear *</button>

    <!-- Facility / Loan Details -->
    <button type="button" onclick="setTextareaContent(
    `Total facilities of up to RM ____, comprising:
• Term Loan 1 (TL1) of up to RM ____
• Term Loan 2 (TL2) of up to RM ____
• Term Loan 3 (TL3) of up to RM ____, comprising:
  ◦ Legal fees of up to RM ____
  ◦ Valuation of up to RM ____
  ◦ Stamp duties of up to RM ____`
)">Facility</button>


    <!-- Islamic Facility -->
    <button type="button" onclick="setTextareaContent(
    `Total financing facilities of up to RM ____, comprising:
• __ year(s) Commodity Murabahah Term-i (Term-i) of up to RM ____,
    * including LVS financing of up to RM ________ comprising:
    ◦ RM ____ for Legal fees
    ◦ RM ____ Valuation fees, and 
    ◦ RM ____ for Stamp Duty
• Ijarah Cash Line-i of up to RM ________`
)">Facility (i)</button>


      <!-- Special Conditions -->
      <button type="button" onclick="setTextareaContent(
    `Remarks:\n\n1. \n\n2. \n\n3. \n`
      )">Remarks</button>


      <!-- Disclaimer / Notes -->
      <button type="button" onclick="setTextareaContent(
    `Disclaimer:
    • The information provided is confidential and intended only for the recipient.
    • This document is for reference purposes only and does not constitute legal advice.
    • The recipient must not share or distribute the content without permission.`
      )">Disclaimer</button>

</div>

<br>

<!-- Indent / Outdent + Indicator -->
<div style="margin-top:10px; display:flex; align-items:center; gap:12px;">

  <button type="button" id="outdent-button">Outdent ◄</button>

  
  <div id="indent-indicator" style="display:flex; align-items:center; gap:6px;">
        <span id="indent-text">Indent Level 0</span>
    <span class="indent-dot"></span>
    <span class="indent-dot"></span>
    <span class="indent-dot"></span>
  </div>

  <button type="button" id="indent-button">Indent ►</button>


</div>

<br>
<textarea id="input_text" placeholder=""></textarea>
</div>

<br>
<div class="output-container">
<h2>Output</h2>
<div class="output-box" id="output" contenteditable="true" onclick="copyToClipboard(this)"></div>
</div>

<script>
const input_text = document.getElementById('input_text');
const outputDiv = document.getElementById('output');

let indentLevel = 0;       // Default = no indent
const maxIndent = 3;
const indentSize = 4;      // spaces per indent

function insertBullet(symbol) {
    const textarea = input_text;
    const start = textarea.selectionStart;
    const end = textarea.selectionEnd;
    const text = textarea.value;

    // Find start of current line
    const lineStart = text.lastIndexOf('\n', start - 1) + 1; // +1 to move past '\n' (-1 -> 0)
    const currentLine = text.slice(lineStart, start);

    // Check if current line already has indent
    const currentIndent = ' '.repeat(indentLevel * indentSize);
    let prefix = '';
    if (!currentLine.startsWith(currentIndent)) {
        prefix = currentIndent; // only add indent if not present
    }

    const insertText = prefix + symbol;

    textarea.value = text.slice(0, start) + insertText + text.slice(end);
    textarea.selectionStart = textarea.selectionEnd = start + insertText.length;
    textarea.focus();
    updateOutput();
}

// Update output
function updateOutput() {
  const value = input_text.value;
  outputDiv.textContent = value.replace(/\n/g, '<br>');
}

input_text.addEventListener('input', updateOutput);
updateOutput();

// Copy to clipboard
function copyToClipboard(el) {
    const text = el.textContent || el.innerText;
    navigator.clipboard.writeText(text).then(() => {
        el.classList.add('copied');
        setTimeout(() => el.classList.remove('copied'), 250);
    });
}

// Indent / Outdent buttons
document.getElementById('indent-button').addEventListener('click', () => {
    if(indentLevel < maxIndent) indentLevel++;
    updateIndentIndicator();
});
document.getElementById('outdent-button').addEventListener('click', () => {
    if(indentLevel > 0) indentLevel--;
    updateIndentIndicator();
});

// Indent indicator
function updateIndentIndicator() {
    const dots = document.querySelectorAll('#indent-indicator .indent-dot');
    const indentText = document.getElementById('indent-text');
    indentText.textContent = 'Indent Level ' + indentLevel;
    dots.forEach((dot, idx) => {
        dot.classList.toggle('active', idx < indentLevel);
    });
}
updateIndentIndicator();

// Auto-indent on new lines
input_text.addEventListener('keydown', (e) => {
    if(e.key === 'Enter') {
        const start = input_text.selectionStart;
        const end = input_text.selectionEnd;
        const text = input_text.value;
        const indent = ' '.repeat(indentLevel * indentSize);
        input_text.value = text.slice(0, start) + '\n' + indent + text.slice(end);
        input_text.selectionStart = input_text.selectionEnd = start + 1 + indent.length;
        e.preventDefault();
        updateOutput();
    }
});


// Auto Expand Textarea
function autoExpandTextarea(el) {
    const extraSpace = 20; // extra pixels below the cursor
    el.style.height = 'auto'; // reset height
    el.style.height = (el.scrollHeight + extraSpace) + 'px'; // set height plus extra
}

// Hook into input event
input_text.addEventListener('input', () => {
    autoExpandTextarea(input_text);
    updateOutput();
});

// Initialize height
autoExpandTextarea(input_text);



//  This is for - if I click the preset - it will auto expand text area also
function setTextareaContent(text) {
    input_text.value = text;      // set the new text
    updateOutput();               // update the output div
    autoExpandTextarea(input_text);  // adjust input height
    autoExpandTextarea(outputDiv);   // adjust output height
}

function appendTextareaContent(text) {
    input_text.value += text;
    updateOutput();
    autoExpandTextarea(input_text);
    autoExpandTextarea(outputDiv);
}




function clearSymbols() {
  const target = document.getElementById('input_text'); // replace with your actual ID
  if(target.isContentEditable) {
    target.innerHTML = '';
  } else {
    target.value = '';
  }
}


</script>

<br><br><br><br><br>
</div>
</body>
</html>

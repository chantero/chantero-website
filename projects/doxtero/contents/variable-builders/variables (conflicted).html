<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<title>Variables</title>
<link rel="stylesheet" href="../../assets/styles/style.css">
</head>

<body>
<div class="container">

<h1>Variables</h1>

<div class="input-container">
<h2 for="variable_input">Variable Name</h2>
<input type="text" id="variable_input" placeholder="" autocomplete="off" />

<br><br>

<div class="method-buttons" id="method_group_button">
  <button data-group="general" class="selected" type="button" aria-pressed="true">Text Case</button>
  <button data-group="name_ic" type="button" aria-pressed="false">Name and IC</button>
  <button data-group="ic_digits" type="button" aria-pressed="false">IC Digits</button>
  <button data-group="text_mask" type="button" aria-pressed="false">Text Masking</button>
  <button data-group="default_text" type="button" aria-pressed="false">Default Text</button>
  <button data-group="image_variable" type="button" aria-pressed="false">Image</button>
  <button data-group="hyperlink" type="button" aria-pressed="false">Hyperlink</button>
  <button data-group="charts" type="button" aria-pressed="false">Charts</button>
</div>

</div>

<br><br>

<div class="output-container">

  <div id="general" class="output-section">
    <h2 style="text-align:center">Text Case</h2>
    <div class="output-grid" id="general_outputs"></div>
  </div>

  <div id="name_ic" class="output-section" style="display:none;">
    <h2 style="text-align:center">Name and IC</h2>
    <div class="output-grid" id="name_ic_outputs"></div>
  </div>

  <div id="ic_digits" class="output-section" style="display:none;">
    <h2 style="text-align:center">IC Digits</h2>
    <div class="output-grid" id="ic_digits_outputs"></div>
  </div>

  <div id="text_mask" class="output-section" style="display:none;">
    <h2 style="text-align:center">Text Masking</h2>
    <h3>Initials</h3>
    <div class="output-grid" id="text_mask_initials_outputs"></div>

    <h3>Mask Text</h3>
    <div class="output-grid" id="text_mask_text_outputs"></div>

    <h3>Mask Number</h3>
    <div class="output-grid" id="text_mask_numbers_outputs"></div>

    <h3>Tag</h3>
    <div class="output-grid" id="text_mask_tag_outputs"></div>
    <h3>Line</h3>
    <div class="output-grid" id="text_mask_line_outputs"></div>
  </div>

  <div id="default_text" class="output-section" style="display:none;">
    <div class="input-container" style="padding-top:0.2em">
      <h2>Insert Default Text</h2>
      <input id="default_text_input" type="text" placeholder="" />
    </div>
    <br>
    <h2 style="text-align:center">Default Text</h2>
    <div class="output-grid" id="default_text_outputs"></div>
  </div>

  <div id="image_variable" class="output-section" style="display:none;">
    <div class="input-container" style="padding-top:0.2em">
      <h2>Image Size (insert number)</h2>
      <input id="image_variable_input" type="number" placeholder="" />
    </div>
    <br>
    <h2 style="text-align:center">Image Variable</h2>
    <div class="output-grid" id="image_variable_outputs"></div>
  </div>

  <div id="hyperlink" class="output-section" style="display:none;">
    <h2 style="text-align:center">Hyperlink</h2>
    <div class="output-grid" id="hyperlink_outputs"></div>
  </div>

  <div id="charts" class="output-section" style="display:none;">
    <div class="input-container" style="padding-top:0.2em">
      <h2>Custom Value Prefix (optional) - output will be uppercase</h2>
      <input id="charts_currency_input" type="text" placeholder="example: USD, MYR" />
    </div>
    <br>
    <h2 style="text-align:center">Charts Output</h2>
    <div class="output-grid" id="charts_outputs"></div>
  </div>

</div>

<script>
const variable_input = document.getElementById('variable_input');
const charts_currency_input = document.getElementById('charts_currency_input');

const methodGroups = {
  general: ['upper','lower','swap','title','capwords','capitalize','sentence case','sentence','caps','land case'],
  name_ic: ['name ic','name ic vertical','name ic vb','ic','ic bracket','ic number','name','name upper','name lower','name caps'],
  ic_digits: ['ic digits'],
  text_mask: {
    initials: ['initials','initials dot','initials lower','initials dot lower'],
    maskText: ['mask'],
    maskNumber: ['mask number']
  }
};

const btns = document.querySelectorAll('#method_group_button button');
const sections = {
  general: document.getElementById('general'),
  name_ic: document.getElementById('name_ic'),
  ic_digits: document.getElementById('ic_digits'),
  text_mask: document.getElementById('text_mask'),
  default_text: document.getElementById('default_text'),
  image_variable: document.getElementById('image_variable'),
  hyperlink: document.getElementById('hyperlink'),
  charts: document.getElementById('charts'),
};

const outputs = {
  general: document.getElementById('general_outputs'),
  name_ic: document.getElementById('name_ic_outputs'),
  ic_digits: document.getElementById('ic_digits_outputs'),
  text_maskInitials: document.getElementById('text_mask_initials_outputs'),
  text_maskMaskText: document.getElementById('text_mask_text_outputs'),
  text_maskMaskNumber: document.getElementById('text_mask_numbers_outputs'),
  text_maskTag: document.getElementById('text_mask_tag_outputs'),
  text_maskLine: document.getElementById('text_mask_line_outputs'),
  default_text: document.getElementById('default_text_outputs'),
  image_variable: document.getElementById('image_variable_outputs'),
  hyperlink: document.getElementById('hyperlink_outputs'),
  charts: document.getElementById('charts_outputs'),
};

const default_text_input = document.getElementById('default_text_input');
const image_variable_input = document.getElementById('image_variable_input');

function createOutputItem(methodLabel, codeText, isBase=false){
  const container = document.createElement('div');
  container.className = 'output-box' + (isBase ? ' base' : '');
  const lab = document.createElement('div');
  lab.className = 'output-label';
  lab.textContent = methodLabel;
  container.appendChild(lab);
  const pre = document.createElement('pre');
  pre.className = 'code';
  pre.textContent = codeText;
  container.appendChild(pre);
  container.addEventListener('click', () => {
    navigator.clipboard.writeText(codeText).then(() => {
      container.classList.add('copied');
      setTimeout(()=>container.classList.remove('copied'), 380);
    });
  });
  return container;
}

function generateTagLineTemplates(variable){
  const tag = methodGroups.general.map(m => ({label:m, tmpl:`{{${variable} | ${m} tag}}`}));
  const line = methodGroups.general.map(m => ({label:m, tmpl:`{{${variable} | ${m} line}}`}));
  return {tag, line};
}

function clearAllOutputsMsg(){
  Object.values(outputs).forEach(c => c.innerHTML = '');
}

function updateOutputs(variable){
  clearAllOutputsMsg();
  if(!variable) return;

  // GENERAL
  outputs.general.appendChild(createOutputItem('variable', `{{${variable}}}`, true));
  methodGroups.general.forEach(m => outputs.general.appendChild(createOutputItem(m, `{{${variable} | ${m}}}`)));

  // NAME & IC
  outputs.name_ic.appendChild(createOutputItem('variable', `{{${variable}}}`, true));
  methodGroups.name_ic.forEach(m => outputs.name_ic.appendChild(createOutputItem(m, `{{${variable} | ${m}}}`)));

  // IC DIGITS
  outputs.ic_digits.appendChild(createOutputItem('variable', `{{${variable}}}`, true));
  methodGroups.ic_digits.forEach(m => outputs.ic_digits.appendChild(createOutputItem(m, `{{${variable} | ${m}}}`)));

  // TEXT MASK - Initials
  outputs.text_maskInitials.appendChild(createOutputItem('variable', `{{${variable}}}`, true));
  methodGroups.text_mask.initials.forEach(m => outputs.text_maskInitials.appendChild(createOutputItem(m, `{{${variable} | ${m}}}`)));

  // TEXT MASK - Mask Text
  outputs.text_maskMaskText.appendChild(createOutputItem('variable', `{{${variable}}}`, true));
  methodGroups.text_mask.maskText.forEach(m => outputs.text_maskMaskText.appendChild(createOutputItem(m, `{{${variable} | ${m}}}`)));

  // TEXT MASK - Mask Number
  outputs.text_maskMaskNumber.appendChild(createOutputItem('variable', `{{${variable}}}`, true));
  methodGroups.text_mask.maskNumber.forEach(m => outputs.text_maskMaskNumber.appendChild(createOutputItem(m, `{{${variable} | ${m}}}`)));

  // TEXT MASK - Tag & Line
  const tagLine = generateTagLineTemplates(variable);
  outputs.text_maskTag.appendChild(createOutputItem('variable', `{{${variable}}}`, true));
  tagLine.tag.forEach(d => outputs.text_maskTag.appendChild(createOutputItem(d.label, d.tmpl)));
  outputs.text_maskLine.appendChild(createOutputItem('variable', `{{${variable}}}`, true));
  tagLine.line.forEach(d => outputs.text_maskLine.appendChild(createOutputItem(d.label, d.tmpl)));

  // DEFAULT TEXT
  outputs.default_text.appendChild(createOutputItem('variable', `{{${variable}}}`, true));
  const defVal = (default_text_input.value || '').trim();
  outputs.default_text.appendChild(createOutputItem('default', `{{${variable} | default(${defVal || ''})}}`));

  // IMAGE VARIABLE
  outputs.image_variable.appendChild(createOutputItem('variable', `{{${variable}}}`, true));
  const imgVal = (image_variable_input.value || '').trim();
  outputs.image_variable.appendChild(createOutputItem('image', `{{${variable} | image}}`));
  outputs.image_variable.appendChild(createOutputItem('image', `{{${variable} | qr}}`));
  if(imgVal){
    outputs.image_variable.appendChild(createOutputItem('cm', `{{${variable} | ${imgVal} cm}}`));
    outputs.image_variable.appendChild(createOutputItem('inch', `{{${variable} | ${imgVal} inch}}`));
  }

  // HYPERLINK
  outputs.hyperlink.appendChild(createOutputItem('variable', `{{${variable}}}`, true));
  outputs.hyperlink.appendChild(createOutputItem('link', `{{${variable} | link}}`));


    // CHARTS
    const prefix = (charts_currency_input.value || '').trim();
    outputs.charts.innerHTML = '';
    if(variable){
      // Pie Chart Section
      const pieHeader = document.createElement('h2');
      pieHeader.textContent = 'Pie Chart';
      outputs.charts.appendChild(pieHeader);

      outputs.charts.appendChild(createOutputItem('pie chart', `{{${variable} | pie}}`));
      outputs.charts.appendChild(createOutputItem('money pie', `{{${variable} | money_pie}}`));
      if(prefix) outputs.charts.appendChild(createOutputItem('money pie (custom)', `{{${variable} | money_pie(${prefix})}}`));

      <br>
      // Bar Chart Section
      const barHeader = document.createElement('h2');
      barHeader.textContent = 'Bar Chart';
      outputs.charts.appendChild(barHeader);

      outputs.charts.appendChild(createOutputItem('bar chart', `{{${variable} | bar}}`));
      outputs.charts.appendChild(createOutputItem('money bar', `{{${variable} | money_bar}}`));
      if(prefix) outputs.charts.appendChild(createOutputItem('money bar (custom)', `{{${variable} | money_bar(${prefix})}}`));
    }




}

// Button toggle
btns.forEach(btn => {
  btn.addEventListener('click', () => {
    const group = btn.dataset.group;
    btns.forEach(b => {
      b.classList.toggle('selected', b === btn);
      b.setAttribute('aria-pressed', b === btn ? 'true' : 'false');
    });
    Object.entries(sections).forEach(([k,el]) => el.style.display = (k === group) ? '' : 'none');
  });
});

// Sync inputs
variable_input.addEventListener('input', () => updateOutputs(variable_input.value.trim()));
default_text_input.addEventListener('input', () => updateOutputs(variable_input.value.trim()));
image_variable_input.addEventListener('input', () => updateOutputs(variable_input.value.trim()));
charts_currency_input.addEventListener('input', () => updateOutputs(variable_input.value.trim()));

// Initialize
updateOutputs('');
</script>

<br><br><br><br><br>

</body>
</html>

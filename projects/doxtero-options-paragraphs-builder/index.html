<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<title>Options Paragraph Builder</title>
<style>
body {
    font-family: "Arial", sans-serif;
    background: #f6f8fa;
    margin: 1.5em 1.5em;
    padding: 0;
    color: #222;
    line-height: 1.6;
    font-size: large;
}

h1 {
    text-align: center;
    margin-bottom: 1.5em;
    font-weight: 700;
    font-size: 1.5rem;
    color: #333;
}

.form-group {
    margin-bottom: 2em;
}

label {
    font-weight: 600;
    display: block;
    margin-bottom: 1em;
    font-size: large; 
}

input, textarea, button {
    font-family: inherit;
    font-size: large;
}

input {
    width: 100%;
    padding: 12px 14px;
    border-radius: 15px;
    border: 1.5px solid #bbb;
    box-sizing: border-box;
    transition: border-color 0.3s ease;
}

input:focus {
    border-color: #4a90e2;
    outline: none;
    box-shadow: 0 0 5px rgba(74, 144, 226, 0.5);
}



/* Update this in your existing CSS */
#newOptionInput {
  min-height: 60px;
  resize: vertical;
  padding: 10px 14px;
  width: 100%;
  border-radius: 15px;
  border: 1.5px solid #bbb;
  font-family: inherit;
  font-size: large;
  box-sizing: border-box;
  transition: border-color 0.3s ease;
}

#newOptionInput:focus {
  border-color: #4a90e2;
  outline: none;
  box-shadow: 0 0 5px rgba(74, 144, 226, 0.5);
}


.options-container {
    background: #fff1f1;
    border-radius: 15px;
    padding: 20px;
    min-width: 280px;
    flex: 1 1 300px;
    max-height: 480px;
    overflow-y: auto;
}

.option-item {
    margin-bottom: 1em;
    display: flex;
    align-items: flex-start;
    gap: 8px;
}

.option-textarea {
    flex: 1 1 auto;
    min-height: 60px;
    resize: vertical;
    padding: 10px 14px;
    border-radius: 15px;
    border: 1.5px solid #bbb;
    font-family: inherit;
    font-size: large;
    box-sizing: border-box;
    transition: border-color 0.3s ease;
}

.option-textarea:focus {
    border-color: #4a90e2;
    outline: none;
    box-shadow: 0 0 5px rgba(74, 144, 226, 0.5);
}

.option-buttons {
    display: flex;
    flex-direction: column;
    gap: 6px;
    margin-top: 4px;
}

.option-buttons button {
    background: #4a90e2;
    border: none;
    color: white;
    padding: 6px 10px;
    border-radius: 10px;
    cursor: pointer;
    font-weight: 600;
    font-size: 0.9rem;
    user-select: none;
    transition: background-color 0.3s ease;
}

.option-buttons button:disabled {
    background: #bbb;
    cursor: not-allowed;
}

.option-buttons button:hover:not(:disabled) {
    background: #357abd;
}

.options-list-container {
  background:rgba(255,255,255, 0.7);
  border: 1.5px solid #e6c6c6;
  border-radius: 15px;
  padding: 15px 20px;
  margin-top: 1.5em;
  max-height: 320px;
  overflow-y: auto;
  box-shadow: 0 2px 6px rgba(230, 198, 198, 0.3);
}

.options-list-container h3 {
  margin-top: 0;
  margin-bottom: 1em;
  font-weight: 700;
  font-size: 1.15rem;
  color: #b33a3a;
  border-bottom: 1px solid #e6c6c6;
  padding-bottom: 0.25em;
  user-select: none;
}


button#addOptionBtn {
    margin-top: 0.75em;
    padding: 10px 18px;
    border: none;
    border-radius: 15px;
    background-color: #4a90e2;
    color: white;
    cursor: pointer;
    font-weight: 600;
    transition: background-color 0.3s ease;
    width: 100%;
}

button#addOptionBtn:hover {
    background-color: #357abd;
}

.output-box {
    background: white;
    border: 1.5px solid #bbb;
    border-radius: 15px;
    padding: 16px 20px;
    margin-top: 1.25em;
    font-family: "Courier New", Courier, monospace;
    cursor: pointer;
    font-size: large;
    line-height: 1.5;
    transition: background-color 0.3s ease;
    white-space: pre-wrap;
    user-select: all;
}

.copied {
    background-color: #ede9f7;
    transition: background-color 0.2s ease;
}

.output-title {
    font-weight: 700;
    margin-top: 3em;
    font-size: 1.25rem;
    color: #222;
    letter-spacing: 0.02em;
}

/* Container */
.container {
    display: flex;
    flex-wrap: wrap;
    gap: 2.5rem;
    max-width: 90%;
    margin: 0 auto;
}

.outputs {
    flex: 1 1 350px;
    min-width: 320px;
    display: flex;
    flex-direction: column;
    gap: 1.5rem;
    background: #e3f4fa;
    border-radius: 15px;
    padding: 20px;
}

.output-title {
    margin-top: 0;
}

/* Responsive */
@media (max-width: 760px) {
    .container {
      flex-direction: column;
    }
    .outputs {
      min-width: auto;
    }
}


</style>
</head>
<body>

<h1>Options Paragraph Builder</h1>

<div class="container">
  <div class="options-container" id="optionsContainer">
    <div class="form-group">
      <label>Condition</label>
      <input type="text" id="conditionInput" placeholder="" />
    </div>


    <div class="form-group">
      <label>Insert Option (multiline allowed)</label>
      <textarea id="newOptionInput" placeholder=""></textarea>
      <button id="addOptionBtn">Add Option</button>
    </div>

    <div class="options-list-container">
      <h3>Current Options</h3>
      <div id="optionsList" aria-live="polite" aria-label="List of current options">
        <!-- Dynamically added options appear here -->
      </div>
    </div>



  </div>

  <div class="outputs">
    <div>
      <div class="output-title">ðŸ”´ Style 1: [[o? condition]]</div>
      <div id="output1" class="output-box" onclick="copyToClipboard(this)">No options yet.</div>
    </div>

    <div>
      <div class="output-title">ðŸŸ¢ Style 2: ((o? condition))</div>
      <div id="output2" class="output-box" onclick="copyToClipboard(this)">No options yet.</div>
    </div>
  </div>
</div>

<script>
const conditionInput = document.getElementById('conditionInput');
const newOptionInput = document.getElementById('newOptionInput');
const addOptionBtn = document.getElementById('addOptionBtn');
const optionsListDiv = document.getElementById('optionsList');

let options = [];

function createOptionElement(text, index) {
  const container = document.createElement('div');
  container.className = 'option-item';
  container.dataset.index = index;

  const textarea = document.createElement('textarea');
  textarea.className = 'option-textarea';
  textarea.value = text;
  textarea.rows = 3;
  textarea.addEventListener('input', () => {
    options[index] = textarea.value;
    updateOutputs();
  });

  const btns = document.createElement('div');
  btns.className = 'option-buttons';

  const upBtn = document.createElement('button');
  upBtn.type = 'button';
  upBtn.textContent = 'â†‘';
  upBtn.title = 'Move Up';
  upBtn.disabled = (index === 0);
  upBtn.addEventListener('click', () => {
    if (index === 0) return;
    [options[index - 1], options[index]] = [options[index], options[index - 1]];
    renderOptions();
  });

  const downBtn = document.createElement('button');
  downBtn.type = 'button';
  downBtn.textContent = 'â†“';
  downBtn.title = 'Move Down';
  downBtn.disabled = (index === options.length - 1);
  downBtn.addEventListener('click', () => {
    if (index === options.length - 1) return;
    [options[index + 1], options[index]] = [options[index], options[index + 1]];
    renderOptions();
  });

  const delBtn = document.createElement('button');
  delBtn.type = 'button';
  delBtn.textContent = 'âœ•';
  delBtn.title = 'Delete Option';
  delBtn.style.backgroundColor = '#d9534f';
  delBtn.addEventListener('click', () => {
    options.splice(index, 1);
    renderOptions();
  });

  btns.appendChild(upBtn);
  btns.appendChild(downBtn);
  btns.appendChild(delBtn);

  container.appendChild(textarea);
  container.appendChild(btns);

  return container;
}

function renderOptions() {
  optionsListDiv.innerHTML = '';
  if (options.length === 0) {
    optionsListDiv.textContent = '[no options yet]';
  } else {
    options.forEach((opt, idx) => {
      optionsListDiv.appendChild(createOptionElement(opt, idx));
    });
  }
  updateOutputs();
}

function updateOutputs() {
  const condition = conditionInput.value.trim();

  if (!condition) {
    document.getElementById('output1').textContent = '';
    document.getElementById('output2').textContent = '';
    return;
  }

  if (options.length === 0) {
    document.getElementById('output1').textContent = 'No options added.';
    document.getElementById('output2').textContent = 'No options added.';
    return;
  }

  // Replace newlines in each option with literal ' <br> '
  const escapedOptions = options.map(opt => opt.replace(/\n/g, '<br>'));
  const joinedOptions = escapedOptions.join('//');

  const output1 = `[[o? ${condition}]]${joinedOptions}[[/]]`;
  const output2 = `((o? ${condition}))${joinedOptions}((/))`;

  document.getElementById('output1').textContent = output1;
  document.getElementById('output2').textContent = output2;
}

addOptionBtn.addEventListener('click', () => {
  const val = newOptionInput.value;
  if (!val.trim()) {
    alert('Please enter an option to add.');
    return;
  }
  options.push(val);
  newOptionInput.value = '';
  renderOptions();
});

conditionInput.addEventListener('input', updateOutputs);

renderOptions();

function copyToClipboard(el) {
  const text = el.textContent || el.innerText;
  navigator.clipboard.writeText(text).then(() => {
    el.classList.add('copied');
    setTimeout(() => el.classList.remove('copied'), 250);
  });
}
</script>

</body>
</html>

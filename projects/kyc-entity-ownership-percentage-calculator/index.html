<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Entity Ownership Percentage Calculator</title>

<style>
  body {
    font-family: Arial, sans-serif;
    background-color: #f0f0f0;
    padding: 2.5em;
    margin: 0;
  }

  .calculator {
    background-color: #c5d0e6;
    padding: 20px;
    border-radius: 10px;
    max-width: 100%;
    margin: 0 auto;
    text-align: center;
  }

  .calculator h1 {
    margin-top: 0;
  }

  .entity {
    margin-bottom: 20px;
    padding: 10px;
    background-color: #fff;
    border: 1px solid #ccc;
    border-radius: 4px;
    text-align: left;
  }

  .entity input[type="text"],
  .entity input[type="number"],
  .shareholder input[type="text"],
  .shareholder input[type="number"] {
    width: calc(100% - 20px);
    padding: 8px;
    margin: 8px 0;
    border: 1px solid #ccc;
    border-radius: 4px;
    box-sizing: border-box;
  }

  .shareholder {
    padding: 10px;
    margin-top: 10px;
    background-color: #f5f5f5;
    border: 1px solid #ccc;
    border-radius: 4px;
    position: relative;
    text-align: left;
  }

  .shareholder .shareholder-header {
    padding: 8px;
    border-radius: 4px 4px 0 0;
    margin: -10px -10px 10px -10px;
    text-align: center;
    font-weight: bold;
  }

  .add-shareholder {
    margin-top: 10px;
    background-color: #34dffb;
    color: black;
    border: none;
    border-radius: 4px;
    cursor: pointer;
    padding: 8px 16px;
  }

  .add-shareholder:hover {
    background-color: #45a049;
  }

  .result {
    margin-top: 20px;
    background-color: #fff;
    padding: 10px;
    border: 1px solid #ccc;
    border-radius: 4px;
    text-align: left;
    cursor: pointer;
    user-select: text;
  }

  .result h2 {
    margin-top: 0;
  }

  .result-text {
    color: #333;
  }

  .copy-indicator {
    display: none;
    color: green;
    font-size: 14px;
    margin-top: 5px;
  }

  .copy-indicator.show {
    display: block;
  }

  @media screen and (min-width: 768px) {
    .calculator {
      max-width: 60%;
    }
  }
</style>

</head>
<body>
  <div class="calculator">
    <h1>Entity Ownership Percentage Calculator</h1>

    <div class="entity">
      <label for="entityName">Entity Name:</label>
      <input type="text" class="entityName">
      <div class="total-shares">
        <label for="totalShares">Total Shares:</label>
        <input type="number" class="totalShares" onchange="calculateOwnership()">
      </div>

      <div class="shareholders">
        <div class="shareholder" style="background-color: #ffcccb;">
          <div class="shareholder-header">Shareholder 1</div>
          <div>
            <label for="shareholderName">Name:</label>
            <input type="text" class="shareholderName" placeholder="Optional" oninput="calculateOwnership()">
          </div>
          <div>
            <label for="shareholderShares">Shares:</label>
            <input type="number" class="shareholderShares" onchange="calculateOwnership()">
          </div>
        </div>
      </div>

      <button class="add-shareholder" onclick="addShareholder(this)">Add Shareholder</button>
    </div>

    <div class="result" onclick="copyToClipboard()">
      <h2>Calculation Result:</h2>
      <div class="result-text" id="resultText"></div>
      <div class="copy-indicator" id="copyIndicator">Copied!</div>
    </div>
  </div>

  <script>
    function calculateOwnership() {
      var entities = document.querySelectorAll('.entity');
      var results = [];

      entities.forEach(function(entity) {
        var entityName = entity.querySelector('.entityName').value;
        var totalShares = parseFloat(entity.querySelector('.totalShares').value);
        var shareholders = entity.querySelectorAll('.shareholder');
        var totalSharesOwned = 0;

        shareholders.forEach(function(shareholder, index) {
          var sharesInput = shareholder.querySelector('.shareholderShares');
          var shares = parseFloat(sharesInput.value);
          if (!isNaN(shares)) {
            totalSharesOwned += shares;

            var shareholderName = shareholder.querySelector('.shareholderName').value;
            var header = shareholder.querySelector('.shareholder-header');
            header.textContent = shareholderName ? shareholderName : `Shareholder ${index + 1}`;

            var percentageOwnership = (shares / totalShares) * 100;
            var percentageDisplay = `${shares} shares (${percentageOwnership.toFixed(2)}%)`;
            var sharesPercentageDisplay = document.createElement('div');
            sharesPercentageDisplay.textContent = percentageDisplay;
            header.appendChild(sharesPercentageDisplay);
          }
        });

        var resultText = '';
        if (entityName && !isNaN(totalShares) && totalShares > 0) {
          resultText += `${entityName} (${totalShares} total shares)<br>`;
          shareholders.forEach(function(shareholder, index) {
            var shareholderName = shareholder.querySelector('.shareholderName').value || `Shareholder ${index + 1}`;
            var shares = parseFloat(shareholder.querySelector('.shareholderShares').value);
            if (!isNaN(shares)) {
              var percentageOwnership = (shares / totalShares) * 100;
              resultText += `${shareholderName}: ${shares} shares (${percentageOwnership.toFixed(2)}%)<br>`;
            }
          });
        }

        results.push(resultText);
      });

      document.getElementById("resultText").innerHTML = results.join('<hr>');
    }

    function addShareholder(button) {
      var shareholdersDiv = button.parentNode.querySelector('.shareholders');
      var newShareholderDiv = document.createElement('div');
      newShareholderDiv.classList.add('shareholder');

      var index = shareholdersDiv.children.length + 1;
      var shareColor = getShareholderColor(index - 1);
      newShareholderDiv.style.backgroundColor = shareColor;

      var header = document.createElement('div');
      header.classList.add('shareholder-header');
      header.textContent = `Shareholder ${index}`;
      newShareholderDiv.appendChild(header);

      var nameInput = document.createElement('div');
      var nameLabel = document.createElement('label');
      nameLabel.textContent = 'Name:';
      var nameInputField = document.createElement('input');
      nameInputField.type = 'text';
      nameInputField.classList.add('shareholderName');
      nameInputField.placeholder = 'Optional';
      nameInputField.addEventListener('input', calculateOwnership);
      nameInput.appendChild(nameLabel);
      nameInput.appendChild(nameInputField);
      newShareholderDiv.appendChild(nameInput);

      var sharesInput = document.createElement('div');
      var sharesLabel = document.createElement('label');
      sharesLabel.textContent = 'Shares:';
      var sharesInputField = document.createElement('input');
      sharesInputField.type = 'number';
      sharesInputField.classList.add('shareholderShares');
      sharesInputField.addEventListener('input', calculateOwnership);
      sharesInput.appendChild(sharesLabel);
      sharesInput.appendChild(sharesInputField);
      newShareholderDiv.appendChild(sharesInput);

      shareholdersDiv.appendChild(newShareholderDiv);
    }

    function getShareholderColor(index) {
      var colors = ['#ffadad', '#ffd6a5', '#ffffea', '#caffbf', '#9bf6ff', '#a0c4ff', '#bdb2ff', '#ffc6ff', '#d7f9f8', '#ffffea','#fff0d4', '#fbe0e0','#e5d4ef'];
      return colors[index % colors.length];
    }

    function copyToClipboard() {
      var resultText = document.getElementById("resultText").innerText;
      navigator.clipboard.writeText(resultText)
        .then(function() {
          var copyIndicator = document.getElementById("copyIndicator");
          copyIndicator.classList.add("show");
          setTimeout(function() {
            copyIndicator.classList.remove("show");
          }, 1500);
        })
        .catch(function(err) {
          console.error('Failed to copy: ', err);
        });
    }
  </script>
</body>
</html>
